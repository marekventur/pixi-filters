{"version":3,"file":"pixi-filter-led.js","sources":["../src/LedFilter.js"],"sourcesContent":["import {vertex} from '@tools/fragments';\nimport fragment from './led.frag';\n\n/**\n * This filter applies a led effect, making the container look like it's some sort of public transport display\n *\n * @class\n * @extends PIXI.Filter\n * @param {Object} [config] A configuration object containing settings for the filter.\n * @param {number} [config.size=10] Width/height of the size of each segment\n * @param {number} [config.fill=0.9] How much of every square is filled with the LED. 1.0 means LEDs are touching\n * @param {number} [config.backgroundColor=0x000000] Background color\n * @param {number} [config.backgroundAlpha=1] Background alpha\n * @param {number} [config.intensity=1] Intensity of filter. O means disabled, 0.5 means even mix of original and filtered, 1 means filter only\n */\nexport default class LedFilter extends PIXI.Filter {\n\n    constructor({ size = 10, fill = 0.9, backgroundColor = 0x000000, backgroundAlpha = 1, intensity = 1 } = {}) {\n        super(vertex, fragment);\n\n        this.uniforms.background = new Float32Array([0, 0, 0, 1]);\n\n        this.size = size;\n        this.fill = fill;\n        this.backgroundColor = backgroundColor;\n        this.backgroundAlpha = backgroundAlpha;\n        this.intensity = intensity;\n    }\n\n    /**\n     * Size of each segment\n     *\n     * @member {number}\n     * @default 10\n     */\n    get size() {\n        return this.uniforms.size;\n    }\n    set size(value) {\n        this.uniforms.size = value;\n    }\n\n    /**\n     * How much of every square is filled with the LED. 1.0 means LEDs are touching\n     *\n     * @member {number}\n     * @default 0.9\n     */\n    get fill() {\n        return this.uniforms.fill;\n    }\n    set fill(value) {\n        this.uniforms.fill = value;\n    }\n\n    /**\n     * Background color\n     *\n     * @member {number}\n     * @default 0x000000\n     */\n    get backgroundColor() {\n        return PIXI.utils.rgb2hex(this.uniforms.background);\n    }\n    set backgroundColor(value) {\n        PIXI.utils.hex2rgb(value, this.uniforms.background);\n    }\n\n    /**\n     * Background alpha\n     *\n     * @member {number}\n     * @default 1\n     */\n    get backgroundAlpha() {\n        return this.uniforms.background[3];\n    }\n    set backgroundAlpha(value) {\n        this.uniforms.background[3] = Math.min(1, Math.max(0, value));\n    }\n\n    /**\n     * Intensity of filter. O means disabled, 0.5 means even mix of original and filtered, 1 means filter only\n     *\n     * @member {number}\n     * @default 1\n     */\n    get intensity() {\n        return this.uniforms.intensity;\n    }\n    set intensity(value) {\n        this.uniforms.intensity = value;\n    }\n\n}\n\n// Export to PixiJS namespace\nPIXI.filters.LedFilter = LedFilter;\n"],"names":["super"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeA,IAAqB,SAAS;IAAqB,kBAEpC,CAAC,GAAA,EAAgG;iCAAP,GAAG,EAAE,CAArF;2DAAA,EAAE,CAAS;2DAAA,GAAG,CAAoB;uGAAA,QAAQ,CAAoB;uGAAA,CAAC,CAAc;+EAAA,CAAC;;QAC/FA,UAAK,KAAA,CAAC,MAAA,MAAM,EAAE,QAAQ,CAAC,CAAC;;QAExB,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;;QAE1D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;QACvC,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;QACvC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;KAC9B;;;;;;yGAAA;;;;;;;;IAQD,mBAAA,IAAQ,mBAAG;QACP,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;KAC7B,CAAA;IACD,mBAAA,IAAQ,iBAAC,KAAK,EAAE;QACZ,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,KAAK,CAAC;KAC9B,CAAA;;;;;;;;IAQD,mBAAA,IAAQ,mBAAG;QACP,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;KAC7B,CAAA;IACD,mBAAA,IAAQ,iBAAC,KAAK,EAAE;QACZ,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,KAAK,CAAC;KAC9B,CAAA;;;;;;;;IAQD,mBAAA,eAAmB,mBAAG;QAClB,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;KACvD,CAAA;IACD,mBAAA,eAAmB,iBAAC,KAAK,EAAE;QACvB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;KACvD,CAAA;;;;;;;;IAQD,mBAAA,eAAmB,mBAAG;QAClB,OAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;KACtC,CAAA;IACD,mBAAA,eAAmB,iBAAC,KAAK,EAAE;QACvB,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;KACjE,CAAA;;;;;;;;IAQD,mBAAA,SAAa,mBAAG;QACZ,OAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC;KAClC,CAAA;IACD,mBAAA,SAAa,iBAAC,KAAK,EAAE;QACjB,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;KACnC,CAAA;;;;;EA7EkC,IAAI,CAAC,MA+E3C;;;AAGD,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;;;;;;;;;;;;"}